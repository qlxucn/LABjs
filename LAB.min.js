!function(e){var t,n=e.$LAB,r="UseLocalXHR",i="AlwaysPreserveOrder",s="AllowDuplicates",c="CacheBust",o="Debug",a="BasePath",l=/^[^?#]*\//.exec(location.href)[0],u=/^chrome-extension:\/\//.test(l),d=u?"":/^\w+\:\/\/\/?[^\/]+/.exec(l)[0],f=document.head||document.getElementsByTagName("head"),p=e.opera&&"[object Opera]"==Object.prototype.toString.call(e.opera)||"MozAppearance"in document.documentElement.style,h=function(){},y=h,g=document.createElement("script"),m="boolean"==typeof g.preload,_=m||g.readyState&&"uninitialized"==g.readyState,v=!_&&!0===g.async,x=!_&&!v&&!p;function b(e){return"[object Function]"==Object.prototype.toString.call(e)}function w(e){return"[object Array]"==Object.prototype.toString.call(e)}function S(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function L(e){for(var t=!1,n=0;n<e.scripts.length;n++)e.scripts[n].ready&&e.scripts[n].exec_trigger&&(t=!0,e.scripts[n].exec_trigger(),e.scripts[n].exec_trigger=null);return t}function B(e,t,n,r){e.onload=e.onreadystatechange=function(){e.readyState&&"complete"!=e.readyState&&"loaded"!=e.readyState||t[n]||(e.onload=e.onreadystatechange=null,r())}}function O(e){e.ready=e.finished=!0;for(var t=0;t<e.finished_listeners.length;t++)e.finished_listeners[t]();e.ready_listeners=[],e.finished_listeners=[]}e.console&&e.console.log&&(e.console.error||(e.console.error=e.console.log),h=function(t){e.console.log(t)},y=function(t,n){e.console.error(t,n)}),e.$LAB=function t(){var p,g={},A=_||x,C=[],E={};function j(e,t,n,i){u&&/^\/\/[^\/]/.test(t.src)&&(t.src="https:"+t.src);var p,y,g,x,b,w=function(){t.finished_cb(t,n)};t.src=(g=t.src,x=e[a],b=/^\w+\:\/\//,/^\/\/\/?/.test(g)?g=location.protocol+g:b.test(g)||"/"==g.charAt(0)||(g=(x||"")+g),b.test(g)?g:("/"==g.charAt(0)?d:l)+g),t.real_src=t.src+(e[c]?(/\?.*$/.test(t.src)?"&_":"?_")+~~(1e9*Math.random())+"=":""),E[t.src]||(E[t.src]={items:[],finished:!1}),y=E[t.src].items,e[s]||0==y.length?(p=y[y.length]={ready:!1,finished:!1,ready_listeners:[function(){t.ready_cb(t,function(){!function(e,t,n){var r;function i(){null!=r&&(r=null,O(n))}E[t.src].finished||(e[s]||(E[t.src].finished=!0),r=n.elem||document.createElement("script"),t.type&&(r.type=t.type),t.charset&&(r.charset=t.charset),B(r,n,"finished",i),n.elem?n.elem=null:n.text?(r.onload=r.onreadystatechange=null,r.text=n.text):r.src=t.real_src,f.insertBefore(r,f.firstChild),n.text&&i())}(e,t,p)})}],finished_listeners:[w]},function(e,t,n,i,s){setTimeout(function(){var c,a,l=t.real_src;if("item"in f){if(!f[0])return void setTimeout(arguments.callee,25);f=f[0]}c=document.createElement("script"),t.type&&(c.type=t.type),t.charset&&(c.charset=t.charset),s?_?(e[o]&&h("start script preload: "+l),n.elem=c,m?(c.preload=!0,c.onpreload=i):c.onreadystatechange=function(){"loaded"==c.readyState&&i()},c.src=l):s&&0==l.indexOf(d)&&e[r]?(a=new XMLHttpRequest,e[o]&&h("start script preload (xhr): "+l),a.onreadystatechange=function(){4==a.readyState&&(a.onreadystatechange=function(){},n.text=a.responseText+"\n//@ sourceURL="+l,i())},a.open("GET",l),a.send()):(e[o]&&h("start script preload (cache): "+l),c.type="text/cache-script",B(c,n,"ready",function(){f.removeChild(c),i()}),c.src=l,f.insertBefore(c,f.firstChild)):v?(e[o]&&h("start script load (ordered async): "+l),c.async=!1,B(c,n,"finished",i),c.src=l,f.insertBefore(c,f.firstChild)):(e[o]&&h("start script load: "+l),B(c,n,"finished",i),c.src=l,f.insertBefore(c,f.firstChild))},0)}(e,t,p,i?function(){p.ready=!0;for(var e=0;e<p.ready_listeners.length;e++)p.ready_listeners[e]();p.ready_listeners=[]}:function(){O(p)},i)):(p=y[0]).finished?w():p.finished_listeners.push(w)}function $(){var e,t,n=S(g,{}),r=[],s=0,c=!1;function a(e,t){n[o]&&h("script preload finished: "+e.real_src),e.ready=!0,e.exec_trigger=t,u()}function l(e,t){n[o]&&h("script execution finished: "+e.real_src),e.ready=e.finished=!0,e.exec_trigger=null;for(var r=0;r<t.scripts.length;r++)if(!t.scripts[r].finished)return;t.finished=!0,u()}function u(){for(;s<r.length;)if(b(r[s])){n[o]&&h("$LAB.wait() executing: "+r[s]);try{r[s++]()}catch(e){n[o]&&y("$LAB.wait() error caught: ",e)}}else{if(!r[s].finished){if(L(r[s]))continue;break}s++}s==r.length&&(c=!1,t=!1)}return{script:(e={script:function(){for(var s=0;s<arguments.length;s++)!function(s,o){var u;w(s)||(o=[s]);for(var d=0;d<o.length;d++)t&&t.scripts||r.push(t={scripts:[],finished:!0}),b(s=o[d])&&(s=s()),s&&(w(s)?((u=[].slice.call(s)).unshift(d,1),[].splice.apply(o,u),d--):("string"==typeof s&&(s={src:s}),s=S(s,{ready:!1,ready_cb:a,finished:!1,finished_cb:l}),t.finished=!1,t.scripts.push(s),j(n,s,t,A&&c),c=!0,n[i]&&e.wait()))}(arguments[s],arguments[s]);return e},wait:function(){if(arguments.length>0){for(var n=0;n<arguments.length;n++)r.push(arguments[n]);t=r[r.length-1]}else t=!1;return u(),e}}).script,wait:e.wait,setOptions:function(t){return S(t,n),e}}}return g[r]=!0,g[i]=!1,g[s]=!1,g[c]=!1,g[o]=!1,g[a]="",p={setGlobalDefaults:function(e){return S(e,g),p},setOptions:function(){return $().setOptions.apply(null,arguments)},script:function(){return $().script.apply(null,arguments)},wait:function(){return $().wait.apply(null,arguments)},queueScript:function(){return C[C.length]={type:"script",args:[].slice.call(arguments)},p},queueWait:function(){return C[C.length]={type:"wait",args:[].slice.call(arguments)},p},runQueue:function(){for(var e,t=p,n=C.length;--n>=0;)t=t[(e=C.shift()).type].apply(null,e.args);return t},noConflict:function(){return e.$LAB=n,p},sandbox:function(){return t()}}}(),null==document.readyState&&document.addEventListener&&(document.readyState="loading",document.addEventListener("DOMContentLoaded",t=function(){document.removeEventListener("DOMContentLoaded",t,!1),document.readyState="complete"},!1))}(this);
